<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Two - Functional</title>
    <style> 
            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
              }
              
              .row {
                display: flex;
                justify-content: center;
              }
              
              .col {
                width: 200px;
                height: 200px;
                border: 3px solid rgb(79, 92, 164);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                cursor: pointer;
              }
              
              .result {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 20px;
              }
              
              #result {
                font-size: 32px;
              }
              
              #board {
                display: none;
                line-height: 10px
              }
              
              #board div {
                margin: 10px 0;
              }
              
              #reset {
                margin-top: 10px;
                padding: 8px 16px;
                font-size: 16px;
                cursor: pointer;
                background-color: #878eb5;
              }

              #game-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
              }

                .row {
                    display: flex;
                    justify-content: center;
                }

                .col {
                    width: 200px;
                    height: 200px;
                    border: 3px solid rgb(79, 92, 164);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    cursor: pointer;
                }

                .result {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    margin-top: 20px;
                }

                #show-result {
                    font-size: 32px;
                }

                
        </style>
  </head>
  <body>
    <div class="result">
      <div id="result"></div>
      <div id="board"></div>
      <div id="reset" onclick="reset()">Reset</div>
    </div>

    <div>
      <div class id="game-container">
        <div class="row">
          <div class="col" onclick="handleClick(0, 0)"></div>
          <div class="col" onclick="handleClick(0, 1)"></div>
          <div class="col" onclick="handleClick(0, 2)"></div>
        </div>
        <div class="row">
          <div class="col" onclick="handleClick(1, 0)"></div>
          <div class="col" onclick="handleClick(1, 1)"></div>
          <div class="col" onclick="handleClick(1, 2)"></div>
        </div>
        <div class="row">
          <div class="col" onclick="handleClick(2, 0)"></div>
          <div class="col" onclick="handleClick(2, 1)"></div>
          <div class="col" onclick="handleClick(2, 2)"></div>
        </div>

      </div>
    </div>

    <script>
      
            function createGame() {
              return {
                player: 1,
                moves: 0,
                win: false,
                board: ["", "", "", "", "", "", "", "", ""],
                winCombos: [
                  [0, 1, 2],
                  [3, 4, 5],
                  [6, 7, 8],
                  [0, 3, 6],
                  [1, 4, 7],
                  [2, 5, 8],
                  [0, 4, 8],
                  [2, 4, 6]
                ],
              };
            }
         
            function endGame(game) {
              if (game.win) {
                return `Player ${game.board[a]} wins!`;
              } else if (game.moves === 9) {
                return `It's a draw!`;
              }
            }

            function renderBoard(game) {
              const board = document.getElementById('game-container');
              board.innerHTML = '';
            
              for (let i = 0; i < 3; i++) {
                const row = document.createElement('div');
                row.className = 'row';
                for (let j = 0; j < 3; j++) {
                  const cell = document.createElement('div');
                  cell.className = 'col';
                  cell.onclick = () => handleClick(i, j);
                  cell.innerHTML = game.board[i * 3 + j]; 
                  row.appendChild(cell);
                }
                board.appendChild(row);
              }
            }
          
            function handleClick(row, col) {
              move(initialGame, row * 3 + col);
            }
          
            function move(game, id) {
              if (!game.win && game.board[id] === "") {
                game.board[id] = game.player === 1 ? 'X' : 'O';
                game.moves++;
                renderBoard(game);
                checkWin(game);
                game.player = game.player === 1 ? 2 : 1;
          
                if (game.moves === 9 && !game.win) {
                  // It's a draw
                  console.log("It's a draw!");
                
                }
              }
            }
          
            function checkWin(game) {
              for (const combo of game.winCombos) {
                const [a, b, c] = combo;
                if (game.board[a] !== "" && game.board[a] === game.board[b] && game.board[a] === game.board[c]) {
                  game.win = true;
                  console.log(`Player ${game.board[a]} wins!`);
                  document.getElementById("result").innerHTML = `Player ${game.board[a]} wins!`;
                  break;
                }
              }
            }
          
            function reset() {
              const game = createGame(); 
              game.player = 1;
              game.moves = 0;
              game.win = false;
              game.board = ["", "", "", "", "", "", "", "", ""];
              document.getElementById("result").innerHTML = "Tic-Tac-Two";
              var cells = document.getElementsByClassName("col");
              for (var i = 0; i < cells.length; i++) {
                  cells[i].innerHTML = "";
              }              
            }

            function ShowResult(game) {
              if (game.win) {
                return `Player ${game.board[a]} wins!`;
              } else if (game.moves === 9) {
                return `It's a draw!`;
              }
            }

            function renderResult(game) {
              const result = document.getElementById('result');
              result.innerHTML = ShowResult(game);
            }
      
            const initialGame = createGame();
          
            renderBoard(initialGame);
          </script>

  </body>
</html>